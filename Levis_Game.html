<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LEVIS GAME</title>
<style>
body{
  margin: 0;
  padding:0;
  height: 100vh;
  background-color: black;
  
}
canvas {
  // border: 2px solid #000;
  //height:100vh;
  
  background-color: white;
}

</style>
</head>

<body>
<canvas id="hud"></canvas>
<canvas id="canvas"></canvas>
<canvas id="menu"></canvas>
<script>
window.onerror = function(message, source, lineno, colno, error) {let code = localStorage.getItem("codeIDE");let getScriptLine = code => code.split("<script>")[0].split("\n").length;let ln = (getScriptLine(code)-1) + lineno;msg = message+" , line :"+ ln+" , column: " +colno+ " , " +error;let errorCursor = {"line":ln,"ch":colno,"sticky":null};localStorage.setItem("errorCursorIDE",JSON.stringify(errorCursor));alert(msg);window.close();}

let // ZzFXMicro - Zuper Zmall Zound Zynth - v1.3.1 by Frank Force ~ 1000 bytes
zzfxV=.3,               // volume
zzfxX=new AudioContext, // audio context
zzfx=                   // play sound
(p=1,k=.05,b=220,e=0,r=0,t=.1,q=0,D=1,u=0,y=0,v=0,z=0,l=0,E=0,A=0,F=0,c=0,w=1,m=0,B=0
,N=0)=>{let M=Math,d=2*M.PI,R=44100,G=u*=500*d/R/R,C=b*=(1-k+2*k*M.random(k=[]))*d/R,
  g=0,H=0,a=0,n=1,I=0,J=0,f=0,h=N<0?-1:1,x=d*h*N*2/R,L=M.cos(x),Z=M.sin,K=Z(x)/4,O=1+K,
  X=-2*L/O,Y=(1-K)/O,P=(1+h*L)/2/O,Q=-(h+L)/O,S=P,T=0,U=0,V=0,W=0;e=R*e+9;m*=R;r*=R;t*=
  R;c*=R;y*=500*d/R**3;A*=d/R;v*=d/R;z*=R;l=R*l|0;p*=zzfxV;for(h=e+m+r+t+c|0;a<h;k[a++]
  =f*p)++J%(100*F|0)||(f=q?1<q?2<q?3<q?Z(g**3):M.max(M.min(M.tan(g),1),-1):1-(2*g/d%2+2
  )%2:1-4*M.abs(M.round(g/d)-g/d):Z(g),f=(l?1-B+B*Z(d*a/l):1)*(f<0?-1:1)*M.abs(f)**D*(a
  <e?a/e:a<e+m?1-(a-e)/m*(1-w):a<e+m+r?w:a<h-c?(h-a-c)/t*w:0),f=c?f/2+(c>a?0:(a<h-c?1:(
  h-a)/c)*k[a-c|0]/2/p):f,N?f=W=S*T+Q*(T=U)+P*(U=f)-Y*V-X*(V=W):0),x=(b+=u+=y)*M.cos(A*
  H++),g+=x+x*E*Z(a**5),n&&++n>z&&(b+=v,C+=v,n=0),!l||++I%l||(b=C,u=G,n=n||1);p=zzfxX.
  createBuffer(1,h,R);p.getChannelData(0).set(k);b=zzfxX.createBufferSource();
b.buffer=p;b.connect(zzfxX.destination);b.start()}

all_dead=false;
canvas.width=440;
canvas.height=520;
function resizeCanvas() {
  var hud = document.getElementById("hud")
  var menu = document.getElementById("menu")
  hud.style.backgroundColor = 'rgb(168,168,168)'
  menu.style.backgroundColor = 'rgb(72,72,72)'
  var WIDTH = window.visualViewport ? window.visualViewport.width : window.innerWidth;
  var HEIGHT = window.visualViewport ? window.visualViewport.height : window.innerHeight;
  
  // Maintain the canvas's aspect ratio
  var aspectRatio = canvas.width / canvas.height;
  canvas.style.position = 'absolute';
  if (WIDTH > HEIGHT) { // Landscape mode
    canvas.style.height = HEIGHT + 'px';
    canvas.style.width = (HEIGHT * aspectRatio) + 'px';
    canvas.style.top = '0px';
    canvas.style.left = ((WIDTH - (HEIGHT * aspectRatio)) / 2) + 'px'; // Center horizontally
    hud.style.position = 'absolute';
    hud.style.left = '0px'
    hud.style.height = '100px'
    hud.style.width = parseInt(canvas.style.left) + 'px'
    menu.style.position = 'absolute';
    menu.style.left = parseInt(canvas.style.left)+parseInt(canvas.style.width)+'px'
    menu.style.height = '100px'
    menu.style.width = WIDTH - (parseInt(canvas.style.left)+parseInt(canvas.style.width)) + 'px'
  } else { // Portrait mode
    canvas.style.width = WIDTH + 'px';
    canvas.style.height = (WIDTH / aspectRatio) + 'px';
    canvas.style.top = ((HEIGHT - (WIDTH / aspectRatio)) / 2) + 'px'; // Center vertically
    canvas.style.left = '0px';
    
    hud.style.position = 'absolute';
    hud.style.top = '0px'
    hud.style.left = parseInt(canvas.style.left) + 'px'
    hud.style.height = parseInt(canvas.style.top) + 'px'
    hud.style.width = parseInt(canvas.style.width) + 'px'
    
    menu.style.position = 'absolute';
    menu.style.top = (parseInt(canvas.style.top)+parseInt(canvas.style.height)) + 'px'
    menu.style.left = parseInt(canvas.style.left) + 'px'
    menu.style.height = HEIGHT - (parseInt(canvas.style.top)+parseInt(canvas.style.height)) + 'px'
    menu.style.width = parseInt(canvas.style.width) + 'px'
  }
  c_left=canvas.style.left;
  c_top=canvas.style.top;
}

// Call resizeCanvas immediately on load and bind to resize event
resizeCanvas();
window.addEventListener('resize', resizeCanvas);


g_board = [
[0,0,0,2,3,3,4,0,8,6,0],
[0,9,9,9,9,9,9,9,9,9,0],
[8,9,0,0,0,5,2,3,1,9,0],
[0,9,0,9,9,9,9,9,4,9,0],
[4,9,7,9,0,6,0,9,0,9,5],
[3,9,0,9,7,9,0,9,7,9,0],
[3,9,0,9,0,9,5,9,6,9,0],
[2,9,0,9,0,9,0,9,0,9,0],
[5,9,0,9,0,9,0,9,0,9,0],
[8,9,0,9,9,9,0,9,0,9,6],
[0,9,0,8,6,0,0,9,0,9,0],
[0,9,9,9,9,9,9,9,7,9,0],
[0,0,5,0,0,7,0,0,0,9,0]
]
l_game = null;
d6 = null;
menu_x = 0;
menu_y = 0;
dice_1 = 0;
dice_2 = 0;
dice_rolling1 = false;
dice_rolling2 = false;
turn = 1;
function draw_hud(){
  var hud = document.getElementById("hud")
  var wide = parseInt(hud.style.width)
  var hud_ctx = hud.getContext("2d");
  hud_ctx.clearRect(0, 0, canvas.width, canvas.height);
  hud_ctx.drawImage(l_game,0,256,128,128, 0,0,40,40);
  hud_ctx.drawImage(l_game,128,256,128,128, wide/2-20,0,40,40);
  for(let i = 0;i < player1.hp; i ++){
    hud_ctx.drawImage(l_game,256,0,128,128, 42 + (i * 16),12,16,16);
  }
  for(let i = 0;i < player2.hp; i ++){
    hud_ctx.drawImage(l_game,256,0,128,128, (wide/2-20)+42 + (i * 16),12,16,16);
  }
}
function draw_menu(){
  /* */
  
  var menu = document.getElementById("menu")
  var wide = parseInt(menu.style.width)
  var tall = parseInt(menu.style.height)
  var menu_ctx = menu.getContext("2d");
  menu_ctx.clearRect(0, 0, canvas.width, canvas.height);
  if (l_game.loaded==false) return;
  menu_ctx.drawImage(l_game,0,256,128,128,0,0,40,40);
  menu_ctx.drawImage(l_game,128,256,128,128,wide/2-20,0,40,40);
  if (d6.loaded==false) return;
if(dice_rolling1==true){dice_1=choose(1,2,3,4,5,6)}
if(dice_rolling2==true){dice_2=choose(1,2,3,4,5,6)}
  menu_ctx.drawImage(d6,(dice_1-1)*64,0,64,64,44,0,40,40);
  menu_ctx.drawImage(d6,(dice_2-1)*64,0,64,64,wide/2-20+44 ,0,40,40);
  menu_ctx.strokeStyle = "rgb(200,200,25)";
  menu_ctx.lineWidth = 4
  menu_ctx.beginPath();
  document.title = 'turn: '+turn
if(turn==1){menu_ctx.strokeRect( 0,0,wide*0.4,tall)}
if(turn==2){menu_ctx.strokeRect( wide*0.4,0,wide*0.4,tall)}
  menu_ctx.closePath();
  menu.onclick = function(){1
    menu_ctx.clearRect(0, 0, canvas.width, canvas.height);
    if(dice_rolling1==false&&dice_rolling2==false){
      
      if(turn==2){
      if(player2.hp>0){shaking(player2)}else{shaking(player1);turn=1}
      }else{
      if(player1.hp>0){shaking(player1)}else{shaking(player2);turn=2}
      }
    }
  };
  menu.ontouchstart = function() {
    menu_ctx.clearRect(0, 0, canvas.width, canvas.height);
    if(dice_rolling1==false&&dice_rolling2==false){
      if(turn==2){
      if(player2.hp>0){shaking(player2)}else{shaking(player1);turn=1}
      }else{
      if(player1.hp>0){shaking(player1)}else{shaking(player2);turn=2}
      }
    }
  };
  
  menu.addEventListener("mousemove", (event) => {
    const rect = canvas.getBoundingClientRect();
    menu_x = event.clientX - rect.left;
    menu_y = event.clientY - rect.top;
  });
}
function draw_board(){
  for( let y = 0 ; y < g_board.length; y++){
    for( let x = 0 ; x < g_board[y].length; x++){
      if(g_board[y][x]==0){// empty
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,384,128,128)
      }
      if(g_board[y][x]==9){ // non space
        draw_set_linewidth(4)
        draw_set_color(214,67,75);
        draw_rectangle(x*40, y*40, 40, 40,false,0,0,0)
      }
      if(g_board[y][x]==7){ // blue portal
        draw_image(l_game,x*40,y*40,40,40,0,0,0,128,0,128,128)
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,384,128,128)
      }
      if(g_board[y][x]==8){ // red portal
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,0,128,128)
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,384,128,128)
      }
      if(g_board[y][x]==6){ // monster
        draw_image(l_game,x*40,y*40,40,40,0,0,0,384,0,128,128)
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,384,128,128)
      }
      if(g_board[y][x]==5){ // heart
        draw_image(l_game,x*40,y*40,40,40,0,0,0,256,0,128,128)
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,384,128,128)
      }
      if(g_board[y][x]==4){ // zoomHead
        if(y==0){
          //draw_image(img,x,y,w,h,rot,ox,oy,s_x,s_y,s_w,s_h)
          draw_image(l_game,x*40,y*40,40,40,90,0,40,0,128,128,128)
        }
        if(y==3){
          //draw_image(img,x,y,w,h,rot,ox,oy,s_x,s_y,s_w,s_h)
          draw_image(l_game,x*40,y*40,40,40,180,40,40,0,128,128,128)
        }
        if(y==4){
          
          draw_image(l_game,x*40,y*40,40,40,0,0,0,0,128,128,128)
        }
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,384,128,128)
      }
      if(g_board[y][x]==3){ // zoom
      if(y==0 || y==2){draw_image(l_game,x*40,y*40,40,40,90,0,40,128,128,128,128)}
      if(x==0){draw_image(l_game,x*40,y*40,40,40,0,0,0,128,128,128,128)}
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,384,128,128)
      }
      if(g_board[y][x]==2){ // zoomTail
      if(y==7){draw_image(l_game,x*40,y*40,40,40,0,0,0,384,128,128,128)}
        //draw_image(img,x,y,w,h,rot,ox,oy,s_x,s_y,s_w,s_h)
      if(y==0){draw_image(l_game,x*40,y*40,40,40,90,0,40,384,128,128,128)}
      if(y==2){draw_image(l_game,x*40,y*40,40,40,90,0,40,384,128,128,128)}
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,384,128,128)
      }
      if(g_board[y][x]==1){ // zoomCorner
        draw_image(l_game,x*40,y*40,40,40,180,40,40,256,128,128,128)
        draw_image(l_game,x*40,y*40,40,40,0,0,0,0,384,128,128)
      }
    }
    
  }
  
  // draw board portal lines
  draw_set_color(72,72,72);draw_set_linewidth(4);
  draw_line(360,220,380,220); draw_line(380,220,380,60);draw_line(380,60,340,60);draw_line(340,60,340,40);
  draw_line(80,180,60,180);draw_line(60,180,60,100);draw_line(60,100,40,100);
  draw_line(220,480,220,460);draw_line(60,460,220,460);draw_line(60,380,60,460);draw_line(40,380,60,380);
  draw_line(200,220,220,220);draw_line(220,220,220,380);draw_line(220,380,140,380);draw_line(140,380,140,400);
  draw_line(360,460,400,500);
  // draw portal line arrow ends
  draw_line(340,40,330,50);draw_line(340,40,350,50);
  draw_line(40,100,50,90);draw_line(40,100,50,110);
  draw_line(140,400,130,390);draw_line(140,400,150,390);
  draw_line(340,40,330,50);draw_line(340,40,350,50);
  draw_line(40,380,50,370);draw_line(40,380,50,390);
  draw_line(400,500,390,480);draw_line(400,500,390,500);
  // draws board dots
  draw_circle(100, 20, 3, false);
  draw_circle(300, 20, 3, false);
  draw_circle(220, 100, 3, false);
  draw_circle(340, 180, 3, false);
  draw_circle(20, 140, 3, false);
  draw_circle(20, 340, 3, false);
  // draws board text
  //draw_centered_text(x, y, text, size)
  draw_centered_text(200, 20, "Z    O    O    M	", 10)
  draw_centered_text(300, 100, "Z    O    O    M	", 10)
  draw_centered_text(20, 210, "Z", 14)
  draw_centered_text(20, 230, "O", 14)
  draw_centered_text(20, 250, "O", 14)
  draw_centered_text(20, 270,"M", 14)
  
  draw_centered_text(180,172,"3", 14)
  draw_centered_text(180,187,"MORE", 12)
  
  
  draw_centered_text(180,260,"END", 14)
  
  //draw home image
  draw_image(l_game,160,280,40,40,0,0,0,384,256,128,128)
  draw_image(l_game,160,320,40,40,0,0,0,256,256,128,128)
  draw_set_linewidth(1)
  draw_rectangle(160,280, 40, 80,true,0,0,0)
  
  
  
  
  
  
  
}

function start(){
  
  winnerSFX = make_sound('leviSFX/victory.mp3',4)
  deathSFX = make_sound('leviSFX/death.mp3',4)
  
  
  
  l_game = draw_set_image('Levis_game.png');
  d6 = draw_set_image('d_six.png')
  player1 = {name:"PLAYER1",x:400,y:480,dir:12,sprite:l_game,hp:3,target:null,shake:false,draw:function(){
    let s = 0
  if(this.shake==true){s = choose(-2,-1,0,1,2)}
    if(this.x==player2.x && this.y==player2.y){
      draw_image(this.sprite,this.x+s-5,this.y+s-5,32,32,0,0,0,0,256,128,128)
    }else{
      draw_image(this.sprite,this.x+s,this.y+s,40,40,0,0,0,0,256,128,128)
    }
  }
}

player2 = {name:"PLAYER2",x:400,y:480,dir:12,sprite:l_game,hp:3,target:null,shake:false,draw:function(){
  let s = 0
if(this.shake==true){s = choose(-2,-1,0,1,2)}
  if(this.x==player1.x && this.y==player1.y){
    draw_image(this.sprite,this.x+s+12,this.y+s+12,32,32,0,0,0,128,256,128,128)
  }else{
    draw_image(this.sprite,this.x+s,this.y+s,40,40,0,0,0,128,256,128,128)
  }
}
}
}

function check(obj){
//monster
if(g_board[obj.y/40][obj.x/40]==6){
obj.hp--;
zzfx(...[,,333,.01,0,.9,4,1.9,,,,,,.5,,.6]);
obj.shake=true;setTimeout(function(){obj.shake=false},500)
}
//heart
if(g_board[obj.y/40][obj.x/40]==5){
zzfx(...[,.1,75,.03,.08,.17,1,1.88,7.83,,,,,.4])
if(obj.hp<6){obj.hp++}
}
//blue portal
if(g_board[obj.y/40][obj.x/40]==7){
zzfx(...[,,925,.04,.3,.6,1,.3,,6.27,-184,.09,.17])
if(obj.x==320 && obj.y==440){ // first portal
  obj.target=[];
  obj.dir = 12;
obj.target.push({x:400,y:480})
}
//320 200
if(obj.x==320 && obj.y==200){ // second portal
  obj.target=[];
  obj.dir = 9;
obj.target.push({x:360,y:200});
obj.target.push({x:360,y:160})
obj.target.push({x:360,y:120})
obj.target.push({x:360,y:80})
obj.target.push({x:360,y:40})
obj.target.push({x:320,y:40})
obj.target.push({x:320,y:0})
}
if(obj.x==80 && obj.y==160){ // third portal
  obj.target=[];
  obj.dir = 6;
obj.target.push({x:40,y:160});
obj.target.push({x:40,y:120})
obj.target.push({x:40,y:80})
obj.target.push({x:0,y:80})
}
if(obj.x==160 && obj.y==200){ // forth portal
  obj.target=[];
  obj.dir = 3;
obj.target.push({x:200,y:200});
obj.target.push({x:200,y:240});
obj.target.push({x:200,y:280});
obj.target.push({x:200,y:320});
obj.target.push({x:200,y:360});
obj.target.push({x:160,y:360})
obj.target.push({x:120,y:360})
obj.target.push({x:120,y:400})
}
if(obj.x==200 && obj.y==480){ // fifth portal
  obj.target=[];
  obj.dir = 6;
obj.target.push({x:200,y:440});
obj.target.push({x:160,y:440});
obj.target.push({x:120,y:440});
obj.target.push({x:80,y:440});
obj.target.push({x:40,y:440});
obj.target.push({x:40,y:400})
obj.target.push({x:40,y:360})
obj.target.push({x:0,y:360})
}
}

//first zoom
if(obj.x==280 && obj.y==0){
obj.target =[]
obj.target.push({x:240,y:0})
obj.target.push({x:200,y:0})
obj.target.push({x:160,y:0})
obj.target.push({x:120,y:0})
obj.target.push({x:80,y:0})
zzfx(...[,,1e3,,,.5,,,,,99,.01,.03])

}
//second zoom
if(obj.x==0 && obj.y==120){
obj.target =[]
obj.target.push({x:0,y:160})
obj.target.push({x:0,y:200})
obj.target.push({x:0,y:240})
obj.target.push({x:0,y:280})
obj.target.push({x:0,y:320})
zzfx(...[,,1e3,,,.5,,,,,99,.01,.03])

}

//third zoom
if(obj.x==320 && obj.y==160){
obj.target =[]
obj.dir = 9;
obj.target.push({x:320,y:120})
obj.target.push({x:320,y:80})
obj.target.push({x:280,y:80})
obj.target.push({x:240,y:80})
obj.target.push({x:200,y:80})
zzfx(...[,,1e3,,,.5,,,,,99,.01,.03])
}
//end
if(obj.x==160 && obj.y==320 || obj.x==160 && obj.y==280){setTimeout(function(){

setTimeout(function(){popup(50,50,canvas.width-100,canvas.height-100,[64,64,64],[255,255,255]);run=false},100)},1);
}
if(player1.hp==0 && player2.hp==0){setTimeout(function(){

setTimeout(function(){popup(50,50,canvas.width-100,canvas.height-100,[64,64,64],[255,255,255]);run=false},100)},1);
}
}
function warp_player1(){
if (typeof tick == "undefined") {
tick = 0
}else{
tick++
}
if(tick>2){ // sets warp speed
if(player1.target.length>0){
  player1.x = player1.target[0].x;
  player1.y = player1.target[0].y;
  player1.target.splice(0,1)
}else{
  player1.target=null
}
tick=0
}
}
function warp_player2(){
if (typeof tick == "undefined") {
tick = 0
}else{
tick++
}
if(tick>2){ // sets warp speed
if(player2.target.length>0){
  player2.x = player2.target[0].x;
  player2.y = player2.target[0].y;
  player2.target.splice(0,1)
}else{
  player2.target=null
}
tick=0
}
}
function move(obj){
zzfx(...[,,150,.05,,.05,,1.3,,,,,,3])
if(obj.dir==12){obj.y-=40}
if(obj.dir==9){obj.x-=40}
if(obj.dir==6){obj.y+=40}
if(obj.dir==3){obj.x+=40}

// turns left
if(obj.x==400 && obj.y==0){obj.dir=9}
if(obj.x==320 && obj.y==80){obj.dir=9}
if(obj.x==240 && obj.y==160){obj.dir=9}
//turns down
if(obj.x==0 && obj.y==0){obj.dir=6}
if(obj.x==80 && obj.y==80){obj.dir=6}
if(obj.x==160 && obj.y==160){obj.dir=6}

//turns right
if(obj.x==0 && obj.y==480){obj.dir=3}
if(obj.x==80 && obj.y==400){obj.dir=3}

//turns up
if(obj.x==320 && obj.y==480){obj.dir=12}
if(obj.x==240 && obj.y==400){obj.dir=12}



}
function shaking(obj){
zzfx(...[,,25,.05,.3,.5,3,9,-0.01,,,,,,13,.1,.2]);
if(obj.name=="PLAYER1"){
dice_rolling1=true;
setTimeout(function(){
  dice_1=roll(player1);
  dice_rolling1=false;
if(player2.hp>0){turn = 2};
  var menu_ctx = menu.getContext("2d");
  menu_ctx.clearRect(0, 0, canvas.width, canvas.height);
},1000)
}
if(obj.name=="PLAYER2"){
dice_rolling2=true;
setTimeout(function(){
  dice_2=roll(player2);
  dice_rolling2=false;
if(player1.hp>0){turn = 1};
  var menu_ctx = menu.getContext("2d");
  menu_ctx.clearRect(0, 0, canvas.width, canvas.height);
},1000)
}
}
function roll(obj){
var pass = false
var d6 = choose(1,2,3,4,5,6)
if(obj.x==160 && obj.y==240){if(d6>2){pass=true}}
if(obj.x==160 && obj.y==160){if(d6>4){pass=true}}
if(obj.x==200 && obj.y==160){if(d6>5){pass=true}}
if(pass==false){
for(let i = 0; i < d6; i++){
  setTimeout(function(){
    move(obj)
  if(i==d6-1){setTimeout(function(){check(obj)},10)}
  },400*(i+1));
}
}
return d6
}
function loop(){
if(keyboard_check_pressed(vk_h)){player1.x=400,player1.y=480,player1.dir=12,player1.hp=3}
if(keyboard_check_pressed(vk_c)){check(player1)}
if(player1.target!=null){warp_player1()}// it has some targets
if(player2.target!=null){warp_player2()}// it has some targets


//killemall
if(mouse_check_pressed()&&mouse_x>160 && mouse_x<200 && mouse_y>280 && mouse_y<320){
player1.hp=0;player2.hp=0;check(player1)
}
let mx = floor(mouse_x/40)*40;
let my = floor(mouse_y/40)*40;
/*
draw_set_color(0,0,255)
draw_centered_text(20, 20, mx+','+my, 10)
draw_set_linewidth(2);
draw_set_linedash([8,2])
draw_rectangle(mx,my, 40, 40, true,0,0,0)
draw_set_linedash([])
*/

if(mouse_check_pressed()){
if(keyboard_check(vk_1)){
  player1.x = mx;player1.y = my;player1.dir=12;check(player1)
}
if(keyboard_check(vk_2)){
  player2.x = mx;player2.y = my;player2.dir=12;check(player2)
}
}

if(all_dead==true){
if(mouse_x>266 && mouse_x<366 && mouse_y>425 && mouse_y<455){
if(mouse_check_pressed()){location.reload()}
}
if(mouse_x>73 && mouse_x<173 && mouse_y>425 && mouse_y<455){
if(mouse_check_pressed()){window.close()}
}
}
}

function draw(){

draw_board()
player1.draw();
player2.draw();
draw_hud();
draw_menu()


}
function popup(x,y,w,h,p_col,t_col){
  all_dead=true;
  draw_set_color(p_col[0],p_col[1],p_col[2])
  draw_rectangle(x, y, w, h,false)
  draw_set_color(80,120,248)
  draw_rectangle(x+10, y+10, w-20, h-20,false)
  draw_set_color(t_col[0],t_col[1],t_col[2])
  var mess = "none"
  if(player1.hp+player2.hp==0){mess = "EVERYONES DEAD!!!";play(deathSFX)}else{
  if(player1.x==160 && player1.y==320 || player1.x==160 && player1.y==280){mess = "PLAYER1 WINS!!!!";play(winnerSFX);}
  if(player2.x==160 && player2.y==320 || player2.x==160 && player2.y==280){mess = "PLAYER2 WINS!!!!";play(winnerSFX);}
}
draw_centered_text(x+w/2, y+124,mess, 24)
draw_centered_text(x+w/2, y+148,"PLAY AGAIN?", 24)
////////////////////////////////////
draw_rectangle(x+24, y+h-50, 100, 35,true)
draw_centered_text(x+24+50, y+h-50+17.5,"cancel", 24)
///////////////////////////////////
draw_rectangle(x+w-124, y+h-50, 100, 35,true)
draw_centered_text(x+w-124+50, y+h-50+17.5,"ok", 24)

}

</script>
<script type='text/javascript' src='engine.js'></script>

</body>
</html>
